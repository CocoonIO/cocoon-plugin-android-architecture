def getArchitecturePreference() {
    def architecture = '';
    def file = file('config.xml').getText()
    def xml = new XmlParser(false, false).parseText(file)

    xml.preference.each { it ->
        def name = it.attribute('name')
        if (name && name.toLowerCase() == 'android-architecture') {
            if (it.attribute('value') != null) {
                architecture = it.attribute('value')
            }
        }
    }

    return architecture;
}

def arch = getArchitecturePreference();
if (arch != '') {
    ext.cdvBuildArch = arch;
    ext.cdvBuildMultipleApks = true;
}
